extern void object::Slave() 
{
	//back out of the bot factory
	move(-7);
	
	//register as a slave
	CommandCenter command = new CommandCenter();
	object myThis = this;
	SlaveInfo info = command.registerSlave(myThis);
	
	int task;
	while(true) {
		task = info.command;
		if (task >= 0) break;
		wait(1); 
	}
	
	//mark busy
	info.status = info.BUSY;
	info.command = 0;
	task = 1;
	performTask(task, info.params);
	//mark free
	info.status = info.FREE;
}

void object::performTask(int task, float[] params) {
	if (task == 1) {
		collect(params);
	} else {
		message("Unrecognized task code: " + task, DisplayError);
	}
}

void object::collect(float[] params) {
	//CONSTANTS
	float resource = params[0];
	point dropOff = new point(params[1], params[2]);
	bool shouldWait = (params[3] != 0);
	Bot me(this);
	me.hoverHeight = 5;
	
	while(me.get(resource, dropOff, 30, shouldWait)) {
		me.deposit(dropOff);
	}
	
	message("No more!");
}